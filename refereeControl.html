<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Referee Control Panel</title>
<style>
  body {
    margin:0;
    background:#000;
    color:#fff;
    font-family:system-ui, sans-serif;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  }
  .panel {
    width:420px;
    background:#111;
    padding:25px;
    border-radius:20px;
    box-shadow:0 0 40px rgba(0,0,0,0.6);
    display:flex;
    flex-direction:column;
    gap:25px;
  }
  h1 {
    text-align:center;
    margin:0;
    font-size:1.8rem;
  }
  .displayBox {
    background:#000;
    padding:20px;
    border-radius:14px;
    text-align:center;
  }
  #clock { font-size:3.4rem; font-weight:700; }
  #shot { font-size:2rem; color:#ff6b6b; margin-top:5px; }
  .buttons {
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:15px;
  }
  button {
    padding:18px;
    border:none;
    border-radius:14px;
    font-size:1.1rem;
    cursor:pointer;
    font-weight:600;
    background:#222;
    color:#fff;
    transition:0.2s;
  }
  button:hover { background:#333; }
  .primary { background:#ff9f66; color:#000; }
  .primary:hover { background:#ff8c40; }
  .danger { background:#d94b4b; }
  .danger:hover { background:#c33; }
</style>
</head>
<body>

<div class="panel">
  <h1>Referee Control</h1>

  <div class="displayBox">
    <div id="clock">10:00</div>
    <div id="shot">24</div>
  </div>

  <div class="buttons">
    <button class="primary" onclick="send('startGame')">▶ Start Clock</button>
    <button class="danger" onclick="send('stopGame')">■ Stop Clock</button>

    <button class="primary" onclick="send('startShot')">▶ Start Shot</button>
    <button onclick="send('stopShot')">■ Stop Shot</button>

    <button onclick="send('reset24')">Reset 24</button>
    <button onclick="send('reset14')">Reset 14</button>

    <button onclick="send('possessionA')">Possession A</button>
    <button onclick="send('possessionB')">Possession B</button>

    <button onclick="send('foulA')">Foul A</button>
    <button onclick="send('foulB')">Foul B</button>

    <button onclick="send('timeoutA')">Timeout A</button>
    <button onclick="send('timeoutB')">Timeout B</button>
  </div>
</div>

<script>
  function loadState() {
    const raw = localStorage.getItem("basketball_scoreboard_state_v3");
    if (!raw) return null;
    try { return JSON.parse(raw); } catch { return null; }
  }

  function updateDisplay() {
    const saved = loadState();
    if (!saved) return;
    const s = saved.state;

    document.getElementById("clock").textContent = formatTime(s.gameClockSeconds);
    document.getElementById("shot").textContent = s.shotClockSeconds;
  }

  function formatTime(sec) {
    const m = Math.floor(sec / 60);
    const s = sec % 60;
    return `${m}:${String(s).padStart(2, '0')}`;
  }

  // Updates UI in real-time
  setInterval(updateDisplay, 200);

  // Send commands
  function send(cmd) {
    localStorage.setItem("scoreboard_command", cmd);
  }
</script>

</body>
</html>